/**
 * The Elegant Textarea by Vital Kudzelka
 * Licensed under the MIT license
 * http://opensource.org/licenses/MIT
 */

(function(w,undefined){'use strict';var Elegant=(function namespace(){var doc=w.document,root=doc.documentElement;function elegant(el,opts){return new Elegant(el,opts)};function Elegant(el,opts){this.opts=opts||{};this.sel=getSelectorEngine(this.opts.sel);if(el){var self=this;if(typeof el==='string'){this.ready(function(){for(var i=0,els=self.sel(el,root),l=els.length;i<l;i++){elegant(els[i],opts)}})}else if(typeof el==='function'){return this.ready(el)}else{this.el=el;if(this.opts.minHeight){this.minHeight=(this.opts.minHeight=='original')?getHeight(el):this.opts.minHeight}else{this.minHeight=0}
var resize=function(){self.resize.call(self,el)};apply(el,{'resize':'none','overflow-y':'hidden'});attachEvent(el,'input',resize);attachEvent(el,'propertychange',resize);}}};Elegant.prototype.resize=function(el,m){if(!el)return;if(!(m=getMirror(el)))return;el.style.height='';el.style.height=max(getHeight(m),this.minHeight)};Elegant.prototype.clone=function(el){var propNames=["border-bottom-width","border-left-width","border-right-width","border-top-width","border-width","border-style","box-sizing","font-family","font-size","font-style","font-variant","font-weight","letter-spacing","line-height","padding-top","padding-right","padding-bottom","padding-left","text-decoration","text-transform","text-indent","width","word-spacing"];var mirror={'position':'absolute','left':'-9999px','top':'0px','overflow-y':'hidden','word-wrap':'break-word','white-space':'pre-wrap'};var original=w.getComputedStyle(el),rv=doc.createElement('div');for(var prop,props={},i=0,l=propNames.length;i<l;i++){prop=propNames[i];props[prop]=original[camelize(prop)];}
apply(rv,this.extend(props,mirror));return rv;};Elegant.prototype.extend=function(o,p){for(var prop in p){if(p.hasOwnProperty(prop)){o[prop]=p[prop];}}
return o;};Elegant.prototype.ready=function(fn){var ready=false,funcs=[],doit=function(){if(ready)return;while(funcs.length){funcs.shift().call(doc);}
ready=true;funcs=null;};attachEvent(w,'DOMContentLoaded',doit);attachEvent(w,'readystatechange',doit);attachEvent(w,'load',doit);if(doc.readyState==='complete'){doit();}
return ready?fn.call(doc):funcs.push(fn);};function max(x,y){return(unitless(x)>unitless(y))?x:y}
function unitless(d){return parseInt(d.replace(/(^-?[\d\.]+)([a-z]*)$/g,'$1'));};function attachEvent(target,type,handler){if(target.addEventListener){target.addEventListener(type,handler,false);}else if(target.attachEvent){target.attachEvent('on'+type,function(e){return handler.call(target,e);});}};function getSelectorEngine(e){if(e)return e;else{return doc.querySelectorAll?function(s,r){return r.querySelectorAll(s)}:function(){throw new Error('Elegant: no selector engine found')}}};function getMirror(el){var k,l,m=el.nextSibling;if(m&&m.className=='js-elegant-mirror'){m.innerHTML='';}else{m=Elegant.prototype.clone(el);m.className='js-elegant-mirror';el.parentNode.insertBefore(m,el.nextSibling);}
if(k=el.value)l=doc.createTextNode(k);k=doc.createElement('span')
k.innerHTML='&nbsp;'
if(l)m.appendChild(l);m.appendChild(k);return m;};function apply(el,props){for(var prop in props){el.style[camelize(prop)]=props[prop];}};function camelize(s){return s.replace(/-([a-z]|[0-9])/ig,function(s,l){return l.toUpperCase();});};function getHeight(el){return w.getComputedStyle(el).height};return elegant;}());w.Elegant=Elegant;}(this));